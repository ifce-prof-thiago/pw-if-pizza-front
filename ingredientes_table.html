<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Ingredientes</title>
    <style>
        /* Reset básico */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Estilização geral */
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #101d42, #3a4971);
            color: #f5f5f5;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        h2 {
            font-size: 28px;
            font-weight: bold;
            color: #70ffd3;
            margin-bottom: 20px;
        }

        /* Estilo do container principal */
        .container {
            background: #202c54;
            border-radius: 16px;
            box-shadow: 0px 8px 20px rgba(0, 0, 0, 0.4);
            padding: 20px;
            width: 100%;
            max-width: 800px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Campo de Busca */
        .search-bar {
            display: flex;
            gap: 10px;
        }

        .search-bar input {
            flex: 1;
            padding: 12px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            background-color: #303c66;
            color: #f5f5f5;
            transition: box-shadow 0.3s ease, background-color 0.3s ease;
        }

        .search-bar input:focus {
            outline: none;
            box-shadow: 0 0 6px 2px rgba(112, 255, 211, 0.6);
        }

        .search-bar button {
            padding: 12px 16px;
            background: linear-gradient(135deg, #70ffd3, #70c6ff);
            color: #202c54;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            transition: transform 0.3s ease, filter 0.3s ease;
        }

        .search-bar button:hover {
            transform: scale(1.02);
            filter: brightness(1.2);
        }

        /* Tabela */
        table {
            width: 100%;
            border-collapse: collapse;
            border-radius: 16px;
            overflow: hidden;
        }

        th, td {
            text-align: left;
            padding: 12px 16px;
            font-size: 14px;
        }

        th {
            background: #303c66;
            color: #b9c6e5;
        }

        td {
            background: #2a2a50;
            color: #e4e4e4;
        }

        tr:nth-child(even) td {
            background: #242446;
        }

        /* Botões de ação */
        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .action-buttons button {
            padding: 8px 12px;
            font-size: 12px;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            color: #fff;
            transition: transform 0.2s ease, background-color 0.3s ease;
        }

        .action-buttons .edit {
            background: #70c6ff;
        }

        .action-buttons .edit:hover {
            background: #5aaae5;
        }

        .action-buttons .delete {
            background: #ff7070;
        }

        .action-buttons .delete:hover {
            background: #e55a5a;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            th, td {
                padding: 10px 12px;
                font-size: 12px;
            }

            .search-bar input {
                font-size: 14px;
            }

            .search-bar button {
                font-size: 12px;
                padding: 10px 14px;
            }
        }

        @media (max-width: 480px) {
            th, td {
                font-size: 10px;
                padding: 8px 10px;
            }

            .search-bar input {
                font-size: 12px;
                padding: 8px 10px;
            }

            .search-bar button {
                font-size: 10px;
                padding: 8px 10px;
            }

            .action-buttons button {
                font-size: 10px;
                padding: 6px 10px;
            }
        }
    </style>
</head>
<body id="app">

<h2>Lista de Ingredientes</h2>

<div class="container">
    <!-- Barra de Busca -->
    <div class="search-bar">
        <input v-model="search" type="text" id="search" placeholder="Buscar por nome...">
        <button @click="buscar()" id="searchButton">Buscar</button>
    </div>

    <!-- Tabela -->
    <table>
        <thead>
        <tr>
            <th>#</th>
            <th>Nome</th>
            <th>Preço Pequeno</th>
            <th>Preço Médio</th>
            <th>Preço Grande</th>
            <th>Ações</th>
        </tr>
        </thead>
        <tbody>
        <!-- Exemplos de ingredientes -->
        <tr v-for="(item, i) in ingredientes" :key="item.id">
            <td>{{i + 1}}</td>
            <td>{{item.nome}}</td>
            <td>{{item.precoP}}</td>
            <td>{{item.precoM}}</td>
            <td>{{item.precoG}}</td>
            <td class="action-buttons">
                <button class="edit">Editar</button>
                <button @click="excluir(item.id)" class="delete">Excluir</button>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script>
    const {createApp, ref} = Vue
    createApp({
        setup() {
            const search = ref('')
            const ingredientes = ref([])

            async function buscar() {
                const resp = await fetch('http://localhost:8080/ingredientes?nome=' + search.value)
                const json = await resp.json()
                ingredientes.value = json
            }

            async function excluir(id){
                const resp = await fetch('http://localhost:8080/ingredientes/' + id, {
                    method: 'DELETE'
                })
                search.value = ''
                buscar()
            }

            return {
                search, ingredientes, buscar, excluir
            }
        }
    }).mount('#app')
</script>
</body>
</html>